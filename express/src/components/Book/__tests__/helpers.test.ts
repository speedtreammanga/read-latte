import { mockedHtmlPage } from './data/oreillyBookPage'
import { getBookSchemaFromHtml } from '../helpers'

describe("testing getBookSchemaFromHtml", () => {
    it("should parse the expected information from an Oreilly html page", () => {
        const res = getBookSchemaFromHtml(mockedHtmlPage)

        const expected = {
            // uri: "https://www.oreilly.com/library/view/docker-in-action/9781617294761/",
            title: "Docker in Action, Second Edition",
            authors: "by Jeffrey Nickoloff, Stephen Kuenzli",
            img: "https://learning.oreilly.com/library/cover/9781617294761/250w/",
            description: "Docker in Action, Second Edition teaches you to create, deploy, and manage applications hosted in Docker containers running on Linux. Fully updated, with four new chapters and revised best practices and examples, this second edition begins with a clear explanation of the Docker model. Then, you go hands-on with packaging applications, testing, installing, running programs securely, and deploying them across a cluster of hosts. With examples showing how Docker benefits the whole dev lifecycle, you’ll discover techniques for everything from dev-and-test machines to full-scale cloud deployments.",
            isbn: "9781617294761",
            release_date: "November 2019",
            toc: [
                { title: "Copyright", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_001.html", level: "1", read: false },
                { title: "Brief Table of Contents", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_003.html", level: "1", read: false },
                { title: "Table of Contents", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_004.html", level: "1", read: false },
                { title: "Praise for the first edition", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_005.html", level: "1", read: false },
                { title: "Foreword", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_006.html", level: "1", read: false },
                { title: "Preface", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_007.html", level: "1", read: false },
                { title: "Acknowledgments", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_008.html", level: "1", read: false },
                { title: "About this book", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_009.html", level: "1", read: false },
                { title: "About the authors", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_010.html", level: "1", read: false },
                { title: "About the cover illustration", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_011.html", level: "1", read: false },
                { title: "Chapter 1. Welcome to Docker", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_012.html", level: "1", read: false },
                { title: "Part 1. Process isolation and environment-independent computing", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_013.html", level: "1", read: false },
                { title: "Chapter 2. Running software in containers", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_014.html", level: "2", read: false },
                { title: "2.1. Controlling containers: Building a website monitor", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_014.html#ch02lev1sec1", level: "3", read: false },
                { title: "2.2. Solved problems and the PID namespace", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_014.html#ch02lev1sec2", level: "3", read: false },
                { title: "2.3. Eliminating metaconflicts: Building a website farm", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_014.html#ch02lev1sec3", level: "3", read: false },
                { title: "2.4. Building environment-agnostic systems", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_014.html#ch02lev1sec4", level: "3", read: false },
                { title: "2.5. Building durable containers", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_014.html#ch02lev1sec5", level: "3", read: false },
                { title: "2.6. Cleaning up", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_014.html#ch02lev1sec6", level: "3", read: false },
                { title: "Summary", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_014.html#ch02lev1sec7", level: "3", read: false },
                { title: "Chapter 3. Software installation simplified", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_015.html", level: "2", read: false },
                { title: "3.1. Identifying software", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_015.html#ch03lev1sec1", level: "3", read: false },
                { title: "3.2. Finding and installing software", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_015.html#ch03lev1sec2", level: "3", read: false },
                { title: "3.3. Installation files and isolation", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_015.html#ch03lev1sec3", level: "3", read: false },
                { title: "Summary", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_015.html#ch03lev1sec4", level: "3", read: false },
                { title: "Chapter 4. Working with storage and volumes", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_016.html", level: "2", read: false },
                { title: "4.1. File trees and mount points", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_016.html#ch04lev1sec1", level: "3", read: false },
                { title: "4.2. Bind mounts", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_016.html#ch04lev1sec2", level: "3", read: false },
                { title: "4.3. In-memory storage", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_016.html#ch04lev1sec3", level: "3", read: false },
                { title: "4.4. Docker volumes", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_016.html#ch04lev1sec4", level: "3", read: false },
                { title: "4.5. Shared mount points and sharing files", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_016.html#ch04lev1sec5", level: "3", read: false },
                { title: "4.6. Cleaning up volumes", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_016.html#ch04lev1sec6", level: "3", read: false },
                { title: "4.7. Advanced storage with volume plugins", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_016.html#ch04lev1sec7", level: "3", read: false },
                { title: "Summary", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_016.html#ch04lev1sec8", level: "3", read: false },
                { title: "Chapter 5. Single-host networking", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_017.html", level: "2", read: false },
                { title: "5.1. Networking background (for beginners)", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_017.html#ch05lev1sec1", level: "3", read: false },
                { title: "5.2. Docker container networking", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_017.html#ch05lev1sec2", level: "3", read: false },
                { title: "5.3. Special container networks: host and none", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_017.html#ch05lev1sec3", level: "3", read: false },
                { title: "5.4. Handling inbound traffic with NodePort publishing", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_017.html#ch05lev1sec4", level: "3", read: false },
                { title: "5.5. Container networking caveats and customizations", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_017.html#ch05lev1sec5", level: "3", read: false },
                { title: "Summary", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_017.html#ch05lev1sec6", level: "3", read: false },
                { title: "Chapter 6. Limiting risk with resource controls", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_018.html", level: "2", read: false },
                { title: "6.1. Setting resource allowances", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_018.html#ch06lev1sec1", level: "3", read: false },
                { title: "6.2. Sharing memory", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_018.html#ch06lev1sec2", level: "3", read: false },
                { title: "6.3. Understanding users", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_018.html#ch06lev1sec3", level: "3", read: false },
                { title: "6.4. Adjusting OS feature access with capabilities", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_018.html#ch06lev1sec4", level: "3", read: false },
                { title: "6.5. Running a container with full privileges", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_018.html#ch06lev1sec5", level: "3", read: false },
                { title: "6.6. Strengthening containers with enhanced tools", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_018.html#ch06lev1sec6", level: "3", read: false },
                { title: "6.7. Building use-case-appropriate containers", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_018.html#ch06lev1sec7", level: "3", read: false },
                { title: "Summary", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_018.html#ch06lev1sec8", level: "3", read: false },
                { title: "Part 2. Packaging software for distribution", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_019.html", level: "1", read: false },
                { title: "Chapter 7. Packaging software in images", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_020.html", level: "2", read: false },
                { title: "7.1. Building Docker images from a container", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_020.html#ch07lev1sec1", level: "3", read: false },
                { title: "7.2. Going deep on Docker images and layers", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_020.html#ch07lev1sec2", level: "3", read: false },
                { title: "7.3. Exporting and importing flat filesystems", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_020.html#ch07lev1sec3", level: "3", read: false },
                { title: "7.4. Versioning best practices", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_020.html#ch07lev1sec4", level: "3", read: false },
                { title: "Summary", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_020.html#ch07lev1sec5", level: "3", read: false },
                { title: "Chapter 8. Building images automatically with Dockerfiles", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_021.html", level: "2", read: false },
                { title: "8.1. Packaging Git with a Dockerfile", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_021.html#ch08lev1sec1", level: "3", read: false },
                { title: "8.2. A Dockerfile primer", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_021.html#ch08lev1sec2", level: "3", read: false },
                { title: "8.3. Injecting downstream build-time behavior", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_021.html#ch08lev1sec3", level: "3", read: false },
                { title: "8.4. Creating maintainable Dockerfiles", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_021.html#ch08lev1sec4", level: "3", read: false },
                { title: "8.5. Using startup scripts and multiprocess containers", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_021.html#ch08lev1sec5", level: "3", read: false },
                { title: "8.6. Building hardened application images", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_021.html#ch08lev1sec6", level: "3", read: false },
                { title: "Summary", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_021.html#ch08lev1sec7", level: "3", read: false },
                { title: "Chapter 9. Public and private software distribution", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_022.html", level: "2", read: false },
                { title: "9.1. Choosing a distribution method", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_022.html#ch09lev1sec1", level: "3", read: false },
                { title: "9.2. Publishing with hosted registries", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_022.html#ch09lev1sec2", level: "3", read: false },
                { title: "9.3. Introducing private registries", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_022.html#ch09lev1sec3", level: "3", read: false },
                { title: "9.4. Manual image publishing and distribution", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_022.html#ch09lev1sec4", level: "3", read: false },
                { title: "9.5. Image source-distribution workflows", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_022.html#ch09lev1sec5", level: "3", read: false },
                { title: "Summary", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_022.html#ch09lev1sec6", level: "3", read: false },
                { title: "Chapter 10. Image pipelines", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_023.html", level: "2", read: false },
                { title: "10.1. Goals of an image build pipeline", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_023.html#ch10lev1sec1", level: "3", read: false },
                { title: "10.2. Patterns for building images", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_023.html#ch10lev1sec2", level: "3", read: false },
                { title: "10.3. Record metadata at image build time", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_023.html#ch10lev1sec3", level: "3", read: false },
                { title: "10.4. Testing images in a build pipeline", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_023.html#ch10lev1sec4", level: "3", read: false },
                { title: "10.5. Patterns for tagging images", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_023.html#ch10lev1sec5", level: "3", read: false },
                { title: "Summary", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_023.html#ch10lev1sec6", level: "3", read: false },
                { title: "Part 3. Higher-level abstractions and orchestration", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_024.html", level: "1", read: false },
                { title: "Chapter 11. Services with Docker and Compose", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_025.html", level: "2", read: false },
                { title: "11.1. A service “Hello World!”", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_025.html#ch11lev1sec1", level: "3", read: false },
                { title: "11.2. Declarative service environments with Compose V3", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_025.html#ch11lev1sec2", level: "3", read: false },
                { title: "11.3. Stateful services and preserving data", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_025.html#ch11lev1sec3", level: "3", read: false },
                { title: "11.4. Load balancing, service discovery, and networks with Compose", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_025.html#ch11lev1sec4", level: "3", read: false },
                { title: "Summary", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_025.html#ch11lev1sec5", level: "3", read: false },
                { title: "Chapter 12. First-class configuration abstractions", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_026.html", level: "2", read: false },
                { title: "12.1. Configuration distribution and management", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_026.html#ch12lev1sec1", level: "3", read: false },
                { title: "12.2. Separating application and configuration", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_026.html#ch12lev1sec2", level: "3", read: false },
                { title: "12.3. Secrets—A special kind of configuration", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_026.html#ch12lev1sec3", level: "3", read: false },
                { title: "Summary", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_026.html#ch12lev1sec4", level: "3", read: false },
                { title: "Chapter 13. Orchestrating services on a cluster of Docker hosts with Swarm", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_027.html", level: "2", read: false },
                { title: "13.1. Clustering with Docker Swarm", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_027.html#ch13lev1sec1", level: "3", read: false },
                { title: "13.2. Deploying an application to a Swarm cluster", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_027.html#ch13lev1sec2", level: "3", read: false },
                { title: "13.3. Communicating with services running on a Swarm cluster", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_027.html#ch13lev1sec3", level: "3", read: false },
                { title: "13.4. Placing service tasks on the cluster", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_027.html#ch13lev1sec4", level: "3", read: false },
                { title: "Summary", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_027.html#ch13lev1sec5", level: "3", read: false },
                { title: "Docker running three containers on a Linux system", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_028.html", level: "1", read: false },
                { title: "Index", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_029.html", level: "1", read: false },
                { title: "List of Figures", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_030.html", level: "1", read: false },
                { title: "List of Tables", uri: "https://learning.oreilly.com/library/view/docker-in-action/9781617294761/kindle_split_031.html", level: "1", read: false },
            ]
        }

        expect(res).toStrictEqual(expected)

    })
})